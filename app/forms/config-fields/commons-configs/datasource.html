<div class="row">
  <div class="col-sm-12 col-xs-12 no-padding form-group">
    <label for="">Origem das opções</label>
    <select class="form-control input-sm" ng-model="ctrl.fieldEdit.dataSourceType" ng-change="ctrl.selectDataSourceType()">
      <option value="">Selecione</option>
      <option value="E">Entidade</option>
      <option value="S">Serviço</option>
      <option value="D">Opções pré definidas</option>
      <option value="O">Opções editáveis</option>
    </select>
  </div> 
</div>

<div class="form-group" ng-show="ctrl.fieldEdit.dataSourceType == 'O' && ctrl.fieldEdit.meta.type != 'checkbox'">
  <button type="button" class="btn btn-primary" ng-click="ctrl.openModalForConfig(ctrl.fieldEdit.meta, 'options', 'options')"> Editar Opções </button>
</div> 

<div class="row" ng-show="ctrl.fieldEdit.dataSourceType == 'E'">
  <div class="form-group">
    <div class="btn-group btn-block">
      <button class="btn btn-primary dropdown-toggle btn-block" data-toggle="dropdown">
        {[{ ctrl.moduleEntity.title || 'Módulos' }]} <i class="caret"></i>
      </button>
      <ul class="dropdown-menu btn-block">
        <li class="dropdown-header" ng-repeat-start="app in ctrl.apps track by $index" ng-bind="app.title"> </li>
        <li ng-repeat="mod in app.modules track by $index" ng-click="ctrl.getModuleEntity(mod.id, ctrl.fieldEdit.dataSource)">
          <a href="" ng-bind="mod.title"></a>
        </li>
        <li ng-repeat-end role="separator" class="divider" ng-hide="$last"></li>
      </ul>
    </div>
  </div>

  <div class="form-group">
    <label for="">Entidade</label>
    <input type="text" 
          class="form-control input-sm" 
          placeholder= "Selecione"
          ng-model="ctrl.fieldEdit.dataSource.key"
          typeahead-on-select="ctrl.getFinders($model)"
          uib-typeahead="entity.name as entity.name for entity in ctrl.entities | filter:{name: $viewValue}" 
          typeahead-min-length="0" />
  </div>

  <div class="row">
    <div class="form-group">
      <label for="">Finder:</label>
      <select class="form-control input-sm" 
              ng-change="ctrl.getFinder(ctrl.fieldEdit.dataSource.key, ctrl.fieldEdit.finder.key)"
              ng-model="ctrl.fieldEdit.finder.key">

        <option value="{[{'finder.' + ctrl.fieldEdit.dataSource.key.toLowerCase() + '.default'}]}">{[{'label.finder.allrecords' | translate}]}</option>
        <option value="{[{ finder.key }]}" ng-repeat="finder in ctrl.finders">{[{finder.title}]}</option>
      </select>
      <!-- <input type="text" 
            class="form-control input-sm" 
            placeholder= "Selecione"
            ng-model="finderkey" 
            uib-typeahead="" 
            typeahead-min-length="0" /> -->
    </div>

  <div class="form-group">
    <label for="">Campo</label>
    <select class="form-control input-sm" 
            ng-model="ctrl.fieldEdit.finder.fieldIndex">
      <option value="$index" ng-repeat="field in ctrl.finder.fields">{[{ field.fieldName }]}</option>
    </select>
    <!-- <input type="text" 
          class="form-control input-sm" 
          placeholder="Selecione"
          ng-model="finderfieldIndex" 
          uib-typeahead="" 
          typeahead-min-length="0" />     -->
  </div>
  </div>

<div class="row" ng-show="ctrl.fieldEdit.dataSourceType == 'S'">
  <div class="form-group">
    <label for="">Source Key:</label>
    <select class="form-control input-sm" 
            ng-model="ctrl.fieldEdit.dataSource.sourceKey" 
            ng-options="source.key as source.key for source in ctrl.moduleEntitySources">
    </select>
  </div>
  <div class="form-group">
    <label for="">Método:</label>
    <input type="text" class="form-control input-sm" ng-model="ctrl.fieldEdit.dataSource.sourceMethod">
  </div>
</div>